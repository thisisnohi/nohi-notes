## 概念

* 指标：指标的生成逻辑可以抽象为时间窗口、事件、主属性、副属性、计算逻辑的组合。



* 指标计算方案

  > 基于数据库SQL的计算方案、基于事件驱动的计算方案和基于实时计算框架

  * 基于数据库SQL的计算方案

    实现简单，但不够灵活，响应时间得不到保障

  * 基于事件驱动的计算方案

    可以进行预计算，查询性能较好

    需要进行大量的预计算

  * 基于实时计算框架的计算方案

    将数据流、中间结果存储、性能和可靠性交给框架本身解决，它提供易用的不同层次抽象的API，甚至可以通过SQL完成一个计算指标的上线。业界流行的三大实时计算框架：Storm、[Spark Streaming](https://zhida.zhihu.com/search?content_id=165416993&content_type=Article&match_order=1&q=Spark+Streaming&zhida_source=entity)和Flink。

* 实时计算和离线计算

  实时计算对延迟要求较高，要求在秒级甚至毫秒级就给出结果。

  离线计算一般指天级别(T+1)或小时级别(T+H)给出计算结果。

* 批计算和流计算

  批计算是按照数据块进行计算，一般需要累积`一定时间`或`一定的数据量`再进行计算，有一定延迟。

  流计算是针对数据流进行计算，1条数据处理完成后立刻发给后续计算节点，延迟较低。

  批计算如果时间间隔很短，处理速度很快，也可以称为某种意义上的准实时计算。

### 框架介绍

### Storm介绍

主要概念有Spout(产生数据源)、Bolt(消息处理者)、Topology(网络拓扑)、Tuple(元祖)。

Storm提交运行的程序称为Topology，Topology处理的最小消息单位是一个Tuple，也就是一个任意对象的数组。在Storm中，数据像流水一样，源源不断地从一个处理模型完成处理后，快读流向下一处理模块。

### Spark Straming介绍

Spark Streaming是Spark核心API的一个扩展，可以实现高吞吐量、具备容错机制的实施流数据的处理。它支持从Kafka、Flume、ZeroMQ等多种数据源获取数据，然后使用map、reduce和join函数进行复杂算法的处理，最后将处理结果存储到文件系统、数据库等。

### Flink介绍



### 实时计算

实时计算的三个特征：

1. **无限数据**：无限数据指的是一种不断增长的，基本上无限的数据集。这些通常被称为“流数据”，而与之相对的是有限的数据集。
2. **无界数据处理**：一种持续的数据处理模式,能够通过处理引擎重复的去处理上面的无限数据，是能够突破有限数据处理引擎的瓶颈的。
3. **低延迟**：延迟是多少并没有明确的定义。但我们都知道数据的价值将随着时间的流逝降低，时效性将是需要持续解决的问题。



## 案例

### 1[国内大厂实时计算技术栈及经典案例 ](https://www.cnblogs.com/yeyuzhuanjia/p/18795473)

```txt
一、字节跳动 & 抖音
技术组合

核心组件：Flink + Kafka + HBase
辅助工具：Redis（实时缓存）、ClickHouse（实时分析）
经典案例

抖音实时推荐系统：
使用 Flink 处理用户行为数据流，结合 Kafka 实现高吞吐数据传输，实时计算用户兴趣标签并存储至 HBase，通过 Redis 提供毫秒级推荐响应。
支撑日均 4 亿用户实时互动，推荐准确率提升 30%。
 
二、腾讯
技术组合

核心组件：Flink + Kudu + Impala
辅助工具：TDW（腾讯数仓）、Angel（图计算引擎）
经典案例

腾讯看点实时数仓：
Flink 实时聚合用户点击、阅读数据并写入 Kudu，Impala 提供分钟级多维分析（如地域分布、内容热度），替代原离线数仓方案，延迟从 3-6 小时降至 5 分钟以内。
 
三、百度
技术组合

核心组件：Flink + Kafka + HBase
辅助工具：Palo（Doris，实时 OLAP）
经典案例

搜索实时排序优化：
基于 Flink 实时处理用户搜索日志，结合 Kafka 传输实时特征数据，HBase 存储动态特征，支持搜索结果的实时个性化排序，响应延迟低于 500ms。

四、阿里巴巴
技术组合

核心组件：Flink + Kafka + Hologres
辅助工具：MaxCompute（离线数仓）、Blink（Flink 定制版）
经典案例

双十一实时大屏：
Flink 实时计算交易、支付数据，通过 Kafka 同步至 Hologres 存储，支撑每秒百万级 QPS 的实时大屏展示，延迟稳定在 1 秒内。

五、美团
技术组合

核心组件：Flink + Kafka + HBase
辅助工具：Doris（实时 OLAP）、ManuGraph（图数据库）
经典案例

外卖实时调度系统：
Flink 处理订单与骑手 GPS 数据流，结合 HBase 存储实时位置信息，动态优化配送路径，日均减少骑手绕行里程 15%。

六、技术趋势与共性
流批一体架构：Flink 成为主流引擎，替代 Spark Streaming（仅批处理微批次）。
实时数仓升级：Kudu + Impala、Hologres 、Kudu、Doris等组件逐步替代传统 Hive，支持实时更新与交互式查询。
AI 融合：实时计算与隐私计算（如联邦学习）结合，提升数据安全性与模型实时性。
```



