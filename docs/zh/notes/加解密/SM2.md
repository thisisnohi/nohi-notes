# SM2

> create by nohi 20230406
>
> 参考：[详解国密SM2的数字签名](https://cloud.tencent.com/developer/article/1610725)

签名流程

1. 发送者对消息计算摘要值。
2. 发送者用私钥对摘要值进行签名得到签名值。
3. 发送者将原始消息和签名值一同发给接收者。

验签流程

1. 接收者接收到消息后，拆分出消息和消息签名值A。
2. 接收者使用公钥对消息进行运算得到摘要值B。
3. 接收者对摘要值B和签名值A进行比较，如果相同表示签名验证成功，否则就是验证失败。

:information_desk_person:  并不是对消息本身签名，而是对消息的摘要值进行签名，这是因为非对称加密算法通常比较慢，而且校验摘要值可以保证消息没有篡改。不论消息有多长，在某种摘要算法下，其摘要值的长度是固定的，对其进行签名速度较快，也比较容易处理。

## SM2

* SM2 国密算法是一种非对称加密算法，基于 ECC（椭圆加密算法）， SM2 算法对标我们常用的国际算法 RSA。

* 但是 SM2 算法由于基于 ECC，签名速度与秘钥速度都快于 RSA。另外 SM2 采用 ECC 256 位，安全强度比 RSA 2048 位更高，且运算速度同样也高于 ESA。

* SM2 私钥，一个大于等于 1 且小于 n-1的整数(n 为 sm2 算法的阶)，长度为 256 位，即 32 个字节，通常会用 16 进制表示。

* SM2 公钥，SM2 椭圆曲线上的一个点，由横坐标与纵坐标两个分量构成，每个长度分量长度为 256 位，通常也用 16 进制表示。

* SM2 公钥一般有两种表示方法：

  - X|Y，即 X与 Y两个分量拼接在一起，总共 64 个字节。

      - 04|X|Y，有些给出公钥与上面格式一样，只不过前面增加 04，代表非压缩，整个公钥长度变成 65 字节。

  - 分开展示，公钥 X，公钥 Y

    ```
    公钥 X|Y：53B97D723AA4CEAC97A13B8C50AA53D40DE36960CFC3A3D7929FD54F39F824ED5A4A27AF871AD62C25C75C9D75C75A0907C565A78B805E9502E616C4E77F3B42
    公钥 X:53B97D723AA4CEAC97A13B8C50AA53D40DE36960CFC3A3D7929FD54F39F824ED
    公钥 Y:5A4A27AF871AD62C25C75C9D75C75A0907C565A78B805E9502E616C4E77F3B42
    ```

    

